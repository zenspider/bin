#!/usr/bin/perl -w

use strict;

############################################################
my $split = 6;
my $strike = 75.81252 / $split;
my $original_amount = 6500 * $split;
my $sold_amount = 6600;
my $amount = $original_amount - $sold_amount;
my $symbol = 'AMZN';
############################################################

use File::Basename;
my $cmd = $0;
my $cmddir = dirname($cmd);

# http://finance.yahoo.com/d/quotes.csv?s=AMZN&f=sl1d1t1c1ohgv&e=.csv
# s  = ticker symbol
# l1 = last price
# d1 = date
# t1 = time
# c1 = change
# o  = open price
# h  = daily high
# g  = daily low
# v  = volume

my $fields = 'l1c1';

use LWP::Simple;
my $data = get "http://quote.yahoo.com/d/quotes.csv?s=$symbol&f=$fields&e=.csv";
die unless $data;

my ($price,$change) = split(/,/, $data);
my $options = int($amount * ($price - $strike));
my $message = sprintf("%s %.2f (%+.2f) %d (%d)", 
		      $symbol, $price, $change, $options, $options*.2*.7);

if (0) {
  print "$message\n";
} else {
  print `$cmddir/pageryand "$message"`;
}
  
